.container-fluid
  .row
    .col-md-6.col-md-offset-1
      %h1 Ignite Talks admin panel
    .col-md-1.col-md-offset-2
      = link_to "http://content.ignitetalks.io/how-to", class: "light btn-edit", :target => "_blank" do
        %i.fa.fa-question-circle.fa-2x.top-15
    .col-md-1
      .btn-group.top-15
        %button{:type => "button", :class => "btn btn-default dropdown-toggle", "data-toggle" => "dropdown"}
          =current_user.name
          %span.caret 
        %ul.dropdown-menu
          %li= link_to "Change your password", edit_user_registration_path
          %li= link_to('Logout', destroy_user_session_path, :method => :delete)

/ Tab headings
.container-fluid
  .row
    .col-md-10.col-md-offset-1
      %ul.nav.nav-tabs{:role => "tablist", :id => "admin_tabs"}
        %li.active{:role => "presentation"}
          %a{"aria-controls" => "videos_tab", "data-toggle" => "tab", :href => "#videos_tab", :id => "tab_videos", :role => "tab"} Videos
        %li{:role => "presentation"}
          %a{"aria-controls" => "playlists_tab", "data-toggle" => "tab", :href => "#playlists_tab", :id => "tab_playlists", :role => "tab"} Playlists
        %li{:role => "presentation"}
          %a{"aria-controls" => "events_tab", "data-toggle" => "tab", :href => "#events_tab", :id => "tab_events", :role => "tab"} Ignites
        %li{:role => "presentation"}
          %a{"aria-controls" => "upcomings_tab", "data-toggle" => "tab", :href => "#upcomings_tab", :id => "tab_upcomings", :role => "tab"} Upcoming events
        -if current_user.curator?
          %li{:role => "presentation"}
            %a{"aria-controls" => "tags_tab", "data-toggle" => "tab", :href => "#tags_tab", :id => "tab_tags", :role => "tab"} Video tags
        -if current_user.admin?
          %li{:role => "presentation"}
            %a{"aria-controls" => "users_tab", "data-toggle" => "tab", :href => "#users_tab", :id => "tab_users", :role => "tab"} Users

/ Tab containers
.container-fluid
  .row
    .col-md-10.col-md-offset-1
      .tab-content

        #videos_tab.tab-pane.active{:role => "tabpanel"}
          %h4
            %button= link_to "Add new video", new_video_path
          %hr
          %table#tblVideos{:data => {:source => videos_path(format: :json)}}
            %thead
              %tr
                %th Title
                %th Presenter
                %th Event
                %th Uploaded
                %th Featured
                %th Edit
                %th Delete
            %tbody
        #playlists_tab.tab-pane{:role => "tabpanel"}
          %h4
            %button= link_to "Add new playlist", new_playlist_path
          %hr
          %table#tblPlaylists{:data => {:source => playlists_path(format: :json)}}
            %thead
              %tr           
                %th Name
                %th Ignite
                %th Featured
                %th Listed   
                %th
                %th
            %tbody

        #tags_tab.tab-pane{:role => "tabpanel"}
          %h4
            %button= link_to "Add new tag", new_tag_path
          %hr
          %table#tags
            %thead
              %tr
                %th Name
                %th
            %tbody
              -@tags.each do |tag|
                %tr
                  %td= link_to tag.name, edit_tag_path(tag)
                  %td
                    =link_to edit_tag_path(tag), class: "light btn-edit" do
                      %i.fa.fa-pencil-square-o
                    - if can? :destroy, tag
                      =link_to tag_path(tag), method: :delete, class: "light btn-delete", data: {confirm: "Are you sure you want to delete this Tag?"} do 
                        %i.fa.fa-times

        #events_tab.tab-pane{:role => "tabpanel"}
          %h4
            - if can? :create, Event
              %button
                =link_to "Add new Ignite", new_event_path
              %hr
          %table#tblEvents{:data => {:source => events_path(format: :json)}}
            %thead
              %tr
                %th Name
                %th City
                %th Country
                %th URL
                %th Twitter
                %th
                %th
            %tbody

        #upcomings_tab.tab-pane{:role => "tabpanel"}
          %h4
            %button
              =link_to "Add new upcoming event", new_upcoming_path
          %hr
          %table#upcoming
            %thead
              %tr
                %th Name
                %th Ignite
                %th Date
                %th
            %tbody
              -@upcomings.each do |upcoming|
                %tr
                  %td= upcoming.name
                  %td= upcoming.event.name
                  %td= upcoming.date
                  %td
                    =link_to edit_upcoming_path(upcoming), class: "light btn-edit" do
                      %i.fa.fa-pencil-square-o
                    =link_to upcoming_path(upcoming), method: :delete, class: "light btn-delete", data: {confirm: "Are you sure you want to delete this upcoming event?"} do 
                      %i.fa.fa-times

        -if current_user.admin?
          #users_tab.tab-pane{:role => "tabpanel"}
            %h4
              %button
                =link_to "Add new User", new_user_path
            %hr
            %table#users
              %thead
                %tr
                  %th Admin?
                  %th Ignites
                  %th Name
                  %th Email
                  %th
                  %th
              %tbody
                -@users.each do |user|
                  %tr
                    - if user.admin?
                      %td
                        %i.fa.fa-check
                    - else
                      %td
                    %td
                      - user.events.map do |event|
                        =event.name
                    %td= user.name
                    %td= user.email
                    %td
                      = link_to edit_user_path(user), class: "light btn-edit" do
                        %i.fa.fa-pencil-square-o
                    %td
                      = link_to user_path(user), method: :delete, data: { confirm: 'Are you sure you with to delete this user?' } do 
                        %i.fa.fa-times